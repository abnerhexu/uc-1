# é¢å‘å¯¹è±¡ç¼–ç¨‹

ä»è¿™ä¸€ç« èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬è¦å­¦ä¹ å…³äºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µå’Œæ–¹æ³•ï¼Œå¹¶ä¸”è¿™äº›æ¦‚å¿µå’Œæ–¹æ³•åœ¨å…¶ä»–çš„è¯­è¨€ä¸Šæ˜¯ç›¸é€šçš„ï¼Œä¾‹å¦‚C++å’ŒJavaã€‚è¯´åˆ°è¯­è¨€ï¼Œä¸€äº›è¯­è¨€æ˜¯é¢å‘è¿‡ç¨‹çš„ï¼Œä¾‹å¦‚Cè¯­è¨€ï¼›è€Œä¸€äº›è¯­è¨€æ˜¯å®Œå…¨é¢å‘å¯¹è±¡çš„ï¼Œä¾‹å¦‚Javaï¼›è¿˜æœ‰ä¸€äº›è¯­è¨€æ”¯æŒè¿™ä¸¤ç§æ¨¡å¼ï¼Œä¾‹å¦‚Pythonå’ŒC++ã€‚

è¯´åˆ°è¿™ä¸¤ç§ç¼–ç¨‹èŒƒå¼ï¼Œé¢å‘è¿‡ç¨‹ï¼ˆProcedure Oriented, POï¼‰æˆ‘ä»¬åº”è¯¥è¿˜æ˜¯æ¯”è¾ƒç†Ÿæ‚‰çš„ã€‚é¢å‘è¿‡ç¨‹æŒ‡çš„å°±æ˜¯æˆ‘ä»¬åœ¨é€šè¿‡ç¼–ç¨‹è§£å†³é—®é¢˜æ—¶ï¼Œå°†é—®é¢˜æ‹†åˆ†æˆæ›´å°çš„é—®é¢˜ï¼Œç„¶åé’ˆå¯¹è¿™äº›é—®é¢˜è®¾è®¡å‡½æ•°ã€‚æŒ‰ç…§ä¸€å®šçš„é¡ºåºæŠŠè¿™äº›å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œé—®é¢˜å°±å¾—åˆ°è§£å†³â€”â€”æˆ‘ä»¬å‡ ä¹ä¸€ç›´éƒ½åœ¨æ˜¾å¼åœ°ä½¿ç”¨è¿™æ ·çš„ç¼–ç¨‹æ¨¡å¼ã€‚

è€Œé¢å‘å¯¹è±¡ï¼ˆObject Oriented, OOï¼‰æ˜¯åœ¨è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œå°†æˆ‘ä»¬é¢å¯¹çš„äº‹ç‰©æŠ½è±¡æˆä¸ºå¯¹è±¡çš„æ¦‚å¿µï¼Œè¿™äº›å¯¹è±¡å…·æœ‰ä¸€å®šçš„è‡ªèº«çš„å±æ€§å’Œæ–¹æ³•ï¼Œé€šè¿‡è¿™äº›å¯¹è±¡å»æ‰§è¡Œè¿™äº›æ–¹æ³•æ¥ä½¿é—®é¢˜å¾—åˆ°è§£å†³â€”â€”äº‹å®ä¸Šæˆ‘ä»¬ä¹Ÿä¸€ç›´éƒ½åœ¨ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„åˆ—è¡¨ã€æ•°ç»„ã€å­—ç¬¦ä¸²ï¼Œå®ƒä»¬éƒ½æ˜¯Pythonä¸­çš„å¯¹è±¡ï¼›è€Œå®ƒä»¬å…·æœ‰çš„`append`ã€`shape`ã€`split`è¿™äº›æ“ä½œå«æ–¹æ³•ã€‚

### 5.1 é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µ

é¢å‘å¯¹è±¡æœ‰ä¸‰å¤§åŸºæœ¬ç‰¹æ€§â€”â€”å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚

å°è£…æ˜¯æŒ‡æŠŠå®¢è§‚äº‹ç‰©æŠ½è±¡æˆä¸ºç±»ï¼Œè€Œç±»å…·æœ‰ä¸€å®šçš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥è®¾ç½®åªæœ‰æŸäº›ç‰¹å®šçš„ç±»æˆ–è€…å¯¹è±¡èƒ½å¤Ÿè®¿é—®è¿™äº›æ•°æ®æˆ–è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚åœ¨ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨ï¼ŒæŸäº›å±æ€§å’Œæ–¹æ³•å¯èƒ½æ˜¯ç§æœ‰çš„ï¼Œå°±é˜²æ­¢äº†æœªç»è®¸å¯çš„è®¿é—®ã€‚å› æ­¤ï¼Œå¯¹è±¡å†…éƒ¨çš„æ•°æ®å¯ä»¥å¾—åˆ°ä¸åŒç¨‹åº¦çš„ä¿æŠ¤ã€‚

ç»§æ‰¿æ˜¯æŒ‡è®©æŸä¸ªå¯¹è±¡å…·æœ‰å¦å¤–æŸä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåå«â€œå“ºä¹³åŠ¨ç‰©â€çš„ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåå«â€œå¤§ç†ŠçŒ«â€çš„ç±»ï¼Œä½œä¸ºâ€œå“ºä¹³åŠ¨ç‰©â€ç±»çš„ä¸€ä¸ªå­ç±»ã€‚å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥é’ˆå¯¹æ€§åœ°åšæ”¹åŠ¨ã€‚

å¤šæ€æ˜¯æŒ‡åŒä¸€ä¸ªç±»çš„åŒä¸€ä¸ªæ–¹æ³•åœ¨ä¸åŒçš„æƒ…å½¢ä¸‹å…·æœ‰ä¸åŒçš„å½¢å¼ï¼Œå®ƒä½¿å¾—å¯¹è±¡å†…éƒ¨ä¸åŒçš„æ•°æ®ç»“æ„èƒ½å¤Ÿå…±äº«ç›¸åŒçš„æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯èƒ½å¯¹ä¸åŒçš„æ•°æ®ç±»å‹çš„å…·ä½“æ“ä½œæ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯è¿™äº›æ“ä½œéƒ½è¢«æŠ½è±¡æˆä¸ºç»Ÿä¸€çš„æ¥å£ï¼Œåªéœ€è¦åšå¯¹åº”æ¥å£çš„è°ƒç”¨å°±å¯ä»¥äº†ã€‚

å¯¹äºå•ç‰‡æœºå’ŒåµŒå…¥å¼è®¾å¤‡ç­‰å¯¹æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ï¼Œä¸€èˆ¬é‡‡ç”¨é¢å‘è¿‡ç¨‹çš„å¼€å‘æ¨¡å¼ï¼›è€Œé¢å‘å¯¹è±¡æ¨¡å¼è™½ç„¶å¯¹æ€§èƒ½è¦æ±‚ç•¥é«˜ï¼ˆå› ä¸ºåˆå§‹åŒ–æ¯ä¸€ä¸ªå®ä¾‹éƒ½æœ‰æ€§èƒ½å¼€é”€ï¼‰ï¼Œä½†æ˜¯èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è®¾è®¡å‡ºä½è€¦åˆçš„ç³»ç»Ÿï¼Œä½¿è½¯ä»¶ç³»ç»Ÿæ›´å®¹æ˜“ç»´æŠ¤ã€‚

### 5.2 Pythonä¸­çš„é¢å‘å¯¹è±¡

#### 5.2.1 ç±»å’Œå¯¹è±¡çš„åˆ›å»ºä¸è®¿é—®

åœ¨Pythonä¸­ï¼Œåˆ›å»ºç±»æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œåªéœ€è¦ä½¿ç”¨å…³é”®å­—`class`ã€‚

```python
class Foo:
    def hello(self, name):
        print("hello,", name)

```

ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªFooç±»çš„å®ä¾‹ã€‚

```python
obj_Foo = Foo()
```

ç„¶åå¯ä»¥è°ƒç”¨obj\_Fooä¸­çš„helloæ–¹æ³•ï¼Œä¼ å…¥å‚æ•°nameï¼Œå°±ä¼šæ‰“å°å‡ºç›¸åº”çš„å†…å®¹ã€‚

```python
obj_Foo.hello("Panda")
```

æœ‰å‡ ä¸ªç‚¹éœ€è¦æ³¨æ„ï¼Œä¸€æ˜¯ç±»åæŒ‰ç…§ä¹ æƒ¯ä½¿ç”¨å¤§é©¼å³°å‘½åæ³•ï¼›äºŒæ˜¯ç±»ä¸­å®šä¹‰çš„å‡½æ•°å«åšç±»çš„æ–¹æ³•ï¼Œå®ƒä»¬çš„ç¬¬ä¸€å‚æ•°å¿…é¡»æ˜¯selfï¼›ä¸‰æ˜¯å¦‚æœç±»ä¸­æœ‰æ•°æ®ï¼Œè¿˜éœ€è¦å®šä¹‰ç±»çš„æ„é€ å‡½æ•°`__init__`ï¼Œä¾‹å¦‚

```python
class Foo:
    def __init__(self, identity):
        self.identity = identity
    def hello(self, name):
        print("hello,", name)
    def checkid(self):
        print("id:", self.identity)
```

è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºå®ä¾‹çš„æ—¶å€™å°±å¿…é¡»å…ˆä¼ å…¥identityçš„å€¼ï¼Œä¾‹å¦‚ï¼Œ

```python
obj_Foo = Foo(210100110487)
obj_Foo.checkid()
```

å…³äºæ­¤å¤„self.identityçš„å«ä¹‰ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºæ˜¯å°†ä¼ å…¥çš„æŸä¸ªå‚æ•°identityï¼ˆå¯¹è±¡ä¸­çš„æ–¹æ³•æ— æ³•è®¿é—®ï¼‰å…ˆèµ‹å€¼ç»™self.identityï¼Œè¿™æ ·å¯¹è±¡ä¸­çš„æ–¹æ³•æ‰å¯ä»¥è®¿é—®å’Œä½¿ç”¨ã€‚äº‹å®ä¸Šï¼Œselfä»£è¡¨çš„æ˜¯æˆ‘ä»¬åˆ›å»ºçš„ç±»çš„å…·ä½“å®ä¾‹ï¼Œå®ƒæŒ‡å‘æˆ‘ä»¬åˆ›å»ºçš„å®ä¾‹çš„å†…å­˜åœ°å€ã€‚

æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å®šä¹‰ç±»çš„æ—¶å€™å°±æ·»åŠ æŸäº›å˜é‡ï¼ˆç±»çš„å±æ€§ï¼‰ã€‚ä»¥ä¸¤æ ¹ä¸‹åˆ’çº¿å¼€å¤´çš„å˜é‡æ˜¯ç§æœ‰å˜é‡ï¼Œè¿™æ„å‘³ç€ä¸èƒ½é€šè¿‡å¤–ç•Œè®¿é—®ã€‚

```python
class Foo:
    gender = "male"
    __grade = 100
    def __init__(self, identity):
        self.identity = identity
    def hello(self, name):
        print("hello,", name)
    def checkid(self):
        print("id:", self.identity)
    def checkg(self):
        print(self.__grade)
```

è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®`identity`ï¼Œä¹Ÿå¯ä»¥è®¿é—®`gender`ï¼Œä½†ä¸èƒ½è®¿é—®`__grade`ã€‚é€šè¿‡å¯¹è±¡å†…éƒ¨çš„æ–¹æ³•æ‰å¯ä»¥è®¿é—®åˆ°`__grade`çš„å€¼ï¼›æ³¨æ„ï¼Œå¯¹è±¡å†…è®¿é—®å¯¹è±¡çš„æ•°æ®ï¼Œéƒ½éœ€è¦é€šè¿‡`self.var`çš„å½¢å¼ã€‚

```python
obj_Foo = Foo(210100110487)
print(obj_Foo.gender)
print(obj_Foo.identity)
obj_Foo.checkg()
print(obj_Foo.__grade) # ä¼šæŠ¥é”™
```

åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ç§æœ‰çš„æ–¹æ³•ã€‚

```python
class Foo:
    gender = "male"
    __grade = 100
    def __init__(self, identity):
        self.identity = identity
    def __checkg(self):
        return self.__grade
    def hello(self):
        print("Grade:", self.__checkg())
```

ç„¶ååªèƒ½é€šè¿‡ç±»ä¸­çš„å…¶ä»–æ–¹æ³•æ¥è°ƒç”¨ã€‚

```python
obj_Foo = Foo(210100110487)
obj_Foo.hello()

```

å…³äºå˜é‡å’Œæ–¹æ³•åç§°ä¸­ä¸‹åˆ’çº¿çš„ä½¿ç”¨ï¼šä¸åŠ ä¸‹åˆ’çº¿è¡¨ç¤ºæ˜¯ä¸€ä¸ªpublicç±»å‹çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨ï¼›åŠ ä¸€ä¸ªä¸‹åˆ’çº¿è¡¨ç¤ºæ˜¯protectedç±»å‹ï¼Œåªèƒ½é€šè¿‡å…¶æœ¬èº«å’Œå­ç±»è¿›è¡Œè°ƒç”¨ï¼›ä¸¤ä¸ªä¸‹åˆ’çº¿è¡¨ç¤ºæ˜¯privateç±»å‹ï¼Œåªèƒ½ç”±è¿™ä¸ªç±»æœ¬èº«è®¿é—®ã€‚

#### 5.2.2 ç±»çš„ç»§æ‰¿

ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªå«`University`çš„ç±»ã€‚

```python
class University:
    def __init__(self, name, identity):
        self.name = name
        self.identity = identity
    def applyfor(self):
        print(self.identity)
```

æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªå«`NTTC`çš„ç±»ï¼Œå¹¶ç»§æ‰¿äºç±»`University`ã€‚è¿™ä¸ªå­ç±»ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ï¼Œä»¥åŠæ·»åŠ è¿›è‡ªå·±ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚æ·»åŠ äº†è‡ªèº«çš„æ„é€ å‡½æ•°åï¼Œå¯ä»¥é€šè¿‡super()æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚å¼—é›·å¾·æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥é‡å†™çš„ï¼Œä¾‹å¦‚ï¼Œ

```python
class NTTC(University):
    def __init__(self, name, identity, Aplus):
        super().__init__(name, identity)
        self.Aplus = Aplus
    def achievements(self):
        print("Milkyway")
    def applyfor(self):
        print("id:", self.identity)
```

ç„¶åå¯ä»¥è°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ã€‚

```python
nudt = NTTC("NUDT", 9102, "CS")
nudt.applyfor()
```

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿å¤šä¸ªç±»ï¼Œåªéœ€è¦åœ¨å­ç±»å®šä¹‰æ—¶å†™å…¥å…¨éƒ¨çˆ¶ç±»çš„åç§°å³å¯ã€‚

#### 5.2.3 è¿ç®—ç¬¦é‡è½½

æˆ‘ä»¬åªéœ€è¦ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç›¸ä¿¡èªæ˜çš„ä½ ä¸€å®šèƒ½å¤Ÿæ˜ç™½å…¶ä½™ç±»ä¼¼çš„æ“ä½œã€‚

> ğŸˆé€šè¿‡ç±»å®šä¹‰æ–°çš„æ•°æ®ç±»å‹ï¼šå¤æ•°ï¼Œå¹¶ä½¿å…¶æ”¯æŒåŠ æ³•çš„è¿ç®—ã€‚

é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªç±»ã€‚

```python
class Complex:
    def __init__(self, real, imag):
        self.real = real
        self.imag = imag
```

æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°çš„æ˜¯ï¼Œåœ¨è¿™ä¸ªç±»é‡Œé¢å®šä¹‰æŸç§æ–¹æ³•ï¼Œä¾‹å¦‚åŠ ã€‚

```python
def add(self, b): # å…¶ä¸­bæ˜¯å¦ä¸€ä¸ªå¤æ•°ç±»å‹å˜é‡
    ans = Complex(0, 0)
    ans.real = self.real + b.real
    ans.imag = self.imag + b.imag
    return ans
```

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡`c = a.add(b)`çš„æ–¹å¼å°†`a`å’Œ`b`ç›¸åŠ ï¼Œå¹¶æŠŠå€¼èµ‹ç»™`c`ã€‚

```python
a = Complex(1, 2)
b = Complex(1, 3)
c = a.add(b)
```

ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ä»£ç èƒ½å¤Ÿæ›´è‡ªç„¶ä¸€äº›ã€‚å°±åƒä¸¤ä¸ªå®æ•°ç›¸åŠ å¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦`+`ä¸€æ ·ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬å®šä¹‰çš„è¿™ä¸ªæ•°æ®ç±»å‹ä¹Ÿå¯ä»¥è¿™æ ·â€”â€”è¿™å°±è¦ç”¨åˆ°è¿ç®—ç¬¦é‡è½½ã€‚Pythonæä¾›äº†è¿ç®—ç¬¦é‡è½½çš„ç‰¹æ®Šå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å®ƒä»¬ã€‚

```python
class Complex:
    def __init__(self, real, imag):
        self.real = real
        self.imag = imag
    def __add__(self, other):
        r = self.real + other.real
        i = self.imag + other.imag
        return Complex(r, i)
a = Complex(1, 2)
b = Complex(1, 3)
c = a + b
print(c)
```

ä½†æ˜¯è¿™å¼•å‡ºäº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¸Œæœ›`c`ä¹Ÿèƒ½è‡ªç„¶åœ°æ‰“å°å‡ºæ¥ï¼Œè€Œä¸æ˜¯åƒç°åœ¨ä¸€æ ·è¿”å›çš„æ˜¯ä¸€ä¸²å†…å­˜åœ°å€ã€‚

```python
<__main__.Complex object at 0x0000019DD3D99CC8>
```

è¿™é‡Œï¼Œæˆ‘ä»¬è¦ç”¨åˆ°ç¬¬äºŒä¸ªç‰¹åˆ«çš„æ–¹æ³•ï¼Œ`__str__`ã€‚

```python
class Complex:
    def __init__(self, real, imag):
        self.real = real
        self.imag = imag
    def __add__(self, other):
        r = self.real + other.real
        i = self.imag + other.imag
        return Complex(r, i)
    def __str__(self):
        return "{}+{}i".format(self.real, self.imag)
a = Complex(1, 2)
b = Complex(1, 3)
c = a + b
print(c)
```

å¥½äº†ï¼Œæ‰“å°å‡ºäº†ç»“æœ$2+5\mathrm i$ã€‚ç°åœ¨è¯·èªæ˜çš„ä½ æ¥è§£å†³æ¥ä¸‹æ¥çš„é—®é¢˜ã€‚

ç±»ä¼¼çš„å‡½æ•°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¯·é€‰ç”¨åˆé€‚çš„å‡½æ•°ï¼Œå®Œæˆä¸¤ä¸ªå¤æ•°çš„å‡æ³•ã€ä¹˜æ³•çš„è¿ç®—ã€‚

| è¿ç®—ç¬¦  | è¡¨è¾¾å¼    | é‡è½½å‡½æ•°           |
| ---- | ------ | -------------- |
| +    | x+y    | `__add__`      |
| -    | x-y    | `__sub__`      |
| \*   | x\*y   | `__mul__`      |
| \*\* | x\*\*y | `__pow__`      |
| /    | x/y    | `__truediv__`  |
| //   | x//y   | `__floordiv__` |
| %    | x % y  | `__mod__`      |

ç±»ä¼¼çš„ï¼Œè¿˜æœ‰æ¯”è¾ƒè¿ç®—ç¬¦çš„é‡è½½ã€‚

| è¿ç®—ç¬¦ | è¡¨è¾¾å¼   | é‡è½½å‡½æ•°     |
| --- | ----- | -------- |
| <   | x < y | `__lt__` |
| <=  | x<=y  | `__le__` |
| ==  | x==y  | `__eq__` |
| !=  | x!=y  | `__ne__` |
| >=  | x>=y  | `__ge__` |
| >   | x>y   | `__gt__` |
